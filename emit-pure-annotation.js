'use strict'

// Marks IIFE class wrappers generated by Babel with a special
// comment understood by UglifyJS, which allows it to remove
// the IIFE when the resulting class is unused.

// WARNING: doesn't work for properties assigned outside the IIFE.

// References:
// https://github.com/mishoo/UglifyJS2/issues/1261
// https://github.com/babel/babel/issues/5632
// https://github.com/babel/babel/pull/6209
// https://github.com/blacksonic/babel-webpack-tree-shaking

const plugin = {
  visitor: {
    ClassExpression(path) {
      path.addComment('leading', '#__PURE__')
    },
  },
}

module.exports = () => plugin
